{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-api.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\n\n// export function getPicture(query) {\n//   const key = '47415256-2dfc8fe63cf3afc0ab872a04e';\n//   return fetch(\n//     `https://pixabay.com/api/?q=${query}&image_type=photo&orientation=horizontal&safesearch=true&key=${key}`\n//   ).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.statusText);\n//     }\n//     return response.json();\n//   });\n// }\n\nexport async function getPicture(query, page = 1, perPage = 15) {\n  const key = '47415256-2dfc8fe63cf3afc0ab872a04e';\n  const URL = `https://pixabay.com/api/`;\n  const url = `${URL}?key=${key}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  const result = await axios.get(url);\n  return result.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gal = document.querySelector('.gallery');\nlet box;\nexport function gallery(images) {\n  const element = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"list-item\" >\n            <a href=\"${largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class = \"gallery-item-img\" />\n        <div class=\"info\">\n            <p class=\"item\"><span class=\"item-text\">Likes</span> <span class=\"kuu\">${likes}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Wiews</span> <span class=\"kuu\">${views}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Comments</span> <span class=\"kuu\">${comments}</span></p>\n            <p class=\"item\"><span class=\"item-text\">Downlods</span> <span class=\"kuu\">${downloads}</span></p>\n        </div></a></li>`\n    )\n    .join('');\n  gal.insertAdjacentHTML('beforeend', element);\n  if (!box) {\n    box = new SimpleLightbox('.gallery-item', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    box.refresh();\n  }\n}\n\nexport function clear() {\n  gal.innerHTML = '';\n}\n","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getPicture } from './js/pixabay-api';\nimport { gallery, clear } from './js/render-api';\n\nconst putting = document.querySelector('.form-js');\nconst front = document.querySelector('.loader');\nconst primebtn = document.querySelector('.btn-js');\nconst gal = document.querySelector('.gallery');\n\nputting.addEventListener('submit', Hadlecick);\nprimebtn.addEventListener('click', MorePhoto);\n\nlet page = 1;\nlet query = '';\nconst perPage = 15;\nlet totalPages = 0;\n\nfunction Hadlecick(e) {\n  e.preventDefault();\n\n  query = e.target.elements.query.value.trim();\n  if (!query) {\n    iziToast.error({ message: 'Please enter a correct query' });\n    return;\n  }\n\n  // Очищуємо галерею та ховаємо кнопку\n  clear();\n  primebtn.style.display = 'none';\n  front.classList.remove('hidden');\n  page = 1;\n\n  getPicture(query, page, perPage)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.info({ message: 'No images found' });\n        return;\n      }\n\n      totalPages = Math.ceil(data.totalHits / perPage);\n      gallery(data.hits);\n\n      // Показуємо кнопку, якщо є ще сторінки\n      if (page < totalPages) {\n        primebtn.style.display = 'block';\n      }\n    })\n    .catch(() => {\n      iziToast.error({ message: 'Error fetching images. Please try again.' });\n    })\n    .finally(() => {\n      front.classList.add('hidden');\n    });\n}\n\nasync function MorePhoto() {\n  page += 1;\n\n  const loadingText = document.querySelector('.loading-text');\n  loadingText.style.display = 'block';\n  loadingText.classList.remove('hidden'); // Показуємо текст\n  primebtn.disabled = true; // Вимикаємо кнопку, щоб уникнути повторних кліків\n\n  try {\n    const data = await getPicture(query, page, perPage);\n    gallery(data.hits);\n\n    // Плавне прокручування сторінки\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n      loadingText.style.display = 'none';\n      const cardHeight = galleryItems[0].getBoundingClientRect().height;\n      const scrollDownLength = cardHeight * 2;\n\n      window.scrollBy({\n        top: scrollDownLength,\n        behavior: 'smooth',\n      });\n    }\n\n    // Перевіряємо, чи це остання сторінка\n    if (page === totalPages) {\n      primebtn.style.display = 'none'; // Ховаємо кнопку \"Load more\"\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (error) {\n    iziToast.error({ message: 'Error fetching images. Please try again.' });\n    loadingText.style.display = 'none';\n    primebtn.style.display = 'none';\n  } finally {\n    loadingText.classList.add('hidden'); // Ховаємо текст після завантаження\n    primebtn.disabled = false; // Знову активуємо кнопку\n  }\n}\n"],"names":["axios","getPicture","query","page","perPage","url","gal","box","gallery","images","element","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clear","putting","front","primebtn","Hadlecick","MorePhoto","totalPages","e","iziToast","data","loadingText","galleryItems","scrollDownLength"],"mappings":"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"}